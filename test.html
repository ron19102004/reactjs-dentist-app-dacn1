<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Upload Expertise</title>
  </head>
  <body>
    <h2>Upload Expertise</h2>

    <input type="file" id="imageInput" accept="image/*" />
    <button onclick="upload()">Upload</button>

    <p id="response"></p>

    <script>
      function upload() {
        const imageInput = document.getElementById("imageInput");
        const image = imageInput.files[0];

        if (!image) {
          alert("Vui lòng chọn một ảnh trước khi upload.");
          return;
        }

        const formData = new FormData();
        const metadata = JSON.stringify({
          name: "Loai thuoc 1",
          description: "<h2>Upload Expertise</h2>",
        });

        formData.append("image", image);
        formData.append(
          "metadata",
          new Blob([metadata], { type: "application/json" })
        );
        const token = "eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkdW5nMjAwNCIsImV4cCI6MTc0NTUwOTIwMywiaWF0IjoxNzQ0MjEzMjAzLCJqdGkiOiJjYjZkY2QyZC04NjEyLTRiY2UtYjNkMi1hZDI2NGQzZWM4NWQifQ.Z2sx33Il3jDNVYtsvG8xVuCowQhGi76wL9XqJmcpTOustKK9XCVw8w9__yUcD2Xh_6bkRf2eG6u7NMN1joaZSpWcNAGXKqPv9kZTMqALRXSiMtoJx2MDNFIUIbKDmmDGyZA0XABzFEUKg1QKIFJixVQ9XbyCEvexkOlmyf_Cdt8arTRc0wPHN4gv9V-FMACGXeF-IDygdONGsBcxiVt5HwgpmzOTLrPdWIy8rEyheLq2T2_o_GULp5C42lDg4WxtMdeFGAmb_mgxx-whBQirVqMpWmKfDUc95efqDjvhBWcUJb93lPlgnrL1okD9n_nK-On9EkmTX7yoRC5WIzwcHQ"
        fetch("http://localhost:8080/api/medicine-categories/new", {
          method: "POST",
          body: formData,
          headers: {
            Authorization: `Bearer ${token}`, // <-- Thêm token ở đây
          },
        },)
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("response").innerText = data;
          })
          .catch((error) => {
            console.error("Lỗi:", error);
            document.getElementById("response").innerText = "Lỗi khi upload!";
          });
      }
    </script>
  </body>
</html>
